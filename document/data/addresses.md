# 住所データ仕様書

## ファイル概要

### 東京都住所データ
| 項目 | 内容 |
|------|------|
| ファイル名 | `13TOKYO.CSV` |
| データソース | 郵便番号データ（日本郵便） |
| 都道府県コード | 13（東京都） |
| 文字エンコーディング | Shift_JIS |
| 区切り文字 | カンマ(,) |

### 神奈川県住所データ
| 項目 | 内容 |
|------|------|
| ファイル名 | `14KANAGAWA.CSV` |
| データソース | 郵便番号データ（日本郵便） |
| 都道府県コード | 14（神奈川県） |
| 文字エンコーディング | Shift_JIS |
| 区切り文字 | カンマ(,) |

## フィールド定義（推定）

※文字エンコーディングの問題により、正確なフィールド構造の確認が必要

| 列番号 | フィールド名（推定） | データ型 | 説明 |
|--------|---------------------|----------|------|
| 1 | pref_code | VARCHAR(5) | 都道府県コード |
| 2 | postal_code_old | VARCHAR(5) | 旧郵便番号 |
| 3 | postal_code | VARCHAR(7) | 郵便番号（7桁） |
| 4 | pref_name_kana | VARCHAR(50) | 都道府県名（カタカナ） |
| 5 | city_name_kana | VARCHAR(100) | 市区町村名（カタカナ） |
| 6 | town_name_kana | VARCHAR(200) | 町域名（カタカナ） |
| 7 | pref_name | VARCHAR(50) | 都道府県名 |
| 8 | city_name | VARCHAR(100) | 市区町村名 |
| 9 | town_name | VARCHAR(200) | 町域名 |
| 10-15 | flags | INTEGER | 各種フラグ |

## 文字エンコーディング問題

現在のファイルはShift_JISエンコーディングのため、UTF-8環境では文字化けが発生します。

### 対処方法
1. **文字コード変換**:
   ```bash
   iconv -f SHIFT_JIS -t UTF-8 13TOKYO.CSV > 13TOKYO_UTF8.CSV
   ```

2. **適切なエンコーディング指定**:
   - プログラム読み込み時にShift_JISを指定
   - データベース挿入前にUTF-8に変換

## データ品質

- **完全性**: 都道府県内の全郵便番号を網羅
- **正確性**: 日本郵便の公式データに基づく
- **更新頻度**: 月次更新（日本郵便による）

## 郵便番号システム

### 郵便番号の構造
- **7桁**: XXX-XXXX形式
- **上3桁**: 地域区分（都道府県・地域）
- **下4桁**: 町域区分

### 東京都の郵便番号範囲
- **100-0xxx**: 千代田区
- **101-0xxx**: 千代田区
- **102-0xxx**: 千代田区
- **103-0xxx**: 中央区
- **104-0xxx**: 中央区
- **105-0xxx**: 港区
- その他多数

### 神奈川県の郵便番号範囲
- **210-0xxx**: 川崎市川崎区
- **220-0xxx**: 横浜市西区
- **230-0xxx**: 横浜市鶴見区
- **240-0xxx**: 横浜市保土ケ谷区
- その他多数

## 使用用途

- addressテーブルへの一括挿入
- 郵便番号による住所検索
- 地域分析・統計処理
- 住所正規化・ジオコーディング

## 注意事項

- **文字エンコーディング**: Shift_JISのため変換が必要
- **町域名**: 一部に「以下に掲載がない場合」等の特殊ケースあり
- **更新**: 定期的な最新データへの更新が必要
- **重複**: 同一郵便番号で複数町域がある場合は複数レコード

## データ変換推奨事項

1. **UTF-8変換**: Shift_JISからUTF-8への変換
2. **正規化**: 町域名の統一・標準化
3. **インデックス**: 郵便番号、都道府県、市区町村にインデックス作成
4. **検証**: データ整合性チェックの実施

## 関連データ

- **駅データ**: 住所フィールドとの照合可能
- **バス停データ**: 市区町村名での関連付け可能
- **物件データ**: 住所情報との紐付けに使用